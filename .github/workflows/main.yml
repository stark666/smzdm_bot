# This is a basic workflow to help you get started with Actions

name: "GitHub Actions SMZDM Bot"

# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the main branch
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  schedule:
    - cron: '0 4 * * *'

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v2

      - name: Set up Python
        uses: actions/setup-python@v1
        with:
          python-version: 3.7

      # Runs a set of commands using the runners shell
      - name: Install requirements
        run: |
          pip install -r requirements.txt

      - name: Working
        env:
          COOKIES: ${{ __ckguid=oQr5UoJelaSpUvQ7CB38UE5; device_id=20627495171596602975164340c2afe8243f480b5e94873149ebdbd02d; _ga=GA1.2.174525459.1596602981; smzdm_user_source=8AF59CB78D8122A31CF6EED4A5B37F09; shequ_pc_sug=b; homepage_sug=f; r_sort_type=score; zdm_qd=%7B%22referrer%22%3A%22https%3A%2F%2Ftophub.today%2F%22%7D; gadsTest=test; _gid=GA1.2.1011457755.1606701753; __gads=ID=6b8ed1201947df48-22a24284f3c400a7:T=1606536384:S=ALNI_MZIFV8KGOrpA0gIc_hLhTFLOZZacA; sensorsdata2015jssdkcross=%7B%22distinct_id%22%3A%22173bcf413bb344-080d0176c6baf7-6f735070-2073600-173bcf413bca72%22%2C%22first_id%22%3A%22%22%2C%22props%22%3A%7B%22%24latest_traffic_source_type%22%3A%22%E5%BC%95%E8%8D%90%E6%B5%81%E9%87%8F%22%2C%22%24latest_search_keyword%22%3A%22%E6%9C%AA%E5%8F%96%E5%88%B0%E5%80%BC%22%2C%22%24latest_referrer%22%3A%22https%3A%2F%2Ftophub.today%2F%22%2C%22%24latest_landing_page%22%3A%22https%3A%2F%2Fpost.smzdm.com%2Fp%2Fa07n3wr8%2F%22%7D%2C%22%24device_id%22%3A%22173bcf413bb344-080d0176c6baf7-6f735070-2073600-173bcf413bca72%22%7D; Hm_lvt_9b7ac3d38f30fe89ff0b8a0546904e58=1606705690; wt3_sid=%3B999768690672041; __jsluid_s=43df752c61a888904fb76ce09285f0e6; smzdm_user_view=1D8CFB14B37468D95D7369727138298D; sess=ZmI0MGR8MTYxMTg5MDM4Mnw4NjEwMTg2NDU4fDc3MmY4MjNjMDgzOGFkYzI2Yjg5ZDJlNWFjMDM5MmIx; user=user%3A8610186458%7C8610186458; smzdm_id=8610186458; userId=8610186458; Hm_lpvt_9b7ac3d38f30fe89ff0b8a0546904e58=1606706401; wt3_eid=%3B999768690672041%7C2159945942800566163%232160670640100434726 }}
          SERVERCHAN_SECRETKEY: ${{ SCU131198Te3f9f02b02dda5317ffe4a2e29608ddc5fc46657c71b8 }}
        run: python main.py >SMZDM_Bot.log
